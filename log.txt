FFF.

Failures:

  1) Post vote methods #up_votes counts the number of votes with value = 1
     Failure/Error: @post = Post.create(title: 'Post title', body: 'Post bodies must be pretty long.')
     NoMethodError:
       undefined method `votes' for nil:NilClass
     # ./app/models/post.rb:38:in `create_vote'
     # /Library/Ruby/Gems/2.0.0/gems/activesupport-4.1.4/lib/active_support/callbacks.rb:424:in `block in make_lambda'
     # /Library/Ruby/Gems/2.0.0/gems/activesupport-4.1.4/lib/active_support/callbacks.rb:221:in `call'
     # /Library/Ruby/Gems/2.0.0/gems/activesupport-4.1.4/lib/active_support/callbacks.rb:221:in `block in halting_and_conditional'
     # /Library/Ruby/Gems/2.0.0/gems/activesupport-4.1.4/lib/active_support/callbacks.rb:86:in `call'
     # /Library/Ruby/Gems/2.0.0/gems/activesupport-4.1.4/lib/active_support/callbacks.rb:86:in `run_callbacks'
     # /Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.4/lib/active_record/callbacks.rb:306:in `_create_record'
     # /Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.4/lib/active_record/timestamp.rb:57:in `_create_record'
     # /Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.4/lib/active_record/persistence.rb:482:in `create_or_update'
     # /Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.4/lib/active_record/callbacks.rb:302:in `block in create_or_update'
     # /Library/Ruby/Gems/2.0.0/gems/activesupport-4.1.4/lib/active_support/callbacks.rb:113:in `call'
     # /Library/Ruby/Gems/2.0.0/gems/activesupport-4.1.4/lib/active_support/callbacks.rb:113:in `call'
     # /Library/Ruby/Gems/2.0.0/gems/activesupport-4.1.4/lib/active_support/callbacks.rb:166:in `block in halting'
     # /Library/Ruby/Gems/2.0.0/gems/activesupport-4.1.4/lib/active_support/callbacks.rb:166:in `call'
     # /Library/Ruby/Gems/2.0.0/gems/activesupport-4.1.4/lib/active_support/callbacks.rb:166:in `block in halting'
     # /Library/Ruby/Gems/2.0.0/gems/activesupport-4.1.4/lib/active_support/callbacks.rb:166:in `call'
     # /Library/Ruby/Gems/2.0.0/gems/activesupport-4.1.4/lib/active_support/callbacks.rb:166:in `block in halting'
     # /Library/Ruby/Gems/2.0.0/gems/activesupport-4.1.4/lib/active_support/callbacks.rb:166:in `call'
     # /Library/Ruby/Gems/2.0.0/gems/activesupport-4.1.4/lib/active_support/callbacks.rb:166:in `block in halting'
     # /Library/Ruby/Gems/2.0.0/gems/activesupport-4.1.4/lib/active_support/callbacks.rb:215:in `call'
     # /Library/Ruby/Gems/2.0.0/gems/activesupport-4.1.4/lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
     # /Library/Ruby/Gems/2.0.0/gems/activesupport-4.1.4/lib/active_support/callbacks.rb:215:in `call'
     # /Library/Ruby/Gems/2.0.0/gems/activesupport-4.1.4/lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
     # /Library/Ruby/Gems/2.0.0/gems/activesupport-4.1.4/lib/active_support/callbacks.rb:86:in `call'
     # /Library/Ruby/Gems/2.0.0/gems/activesupport-4.1.4/lib/active_support/callbacks.rb:86:in `run_callbacks'
     # /Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.4/lib/active_record/callbacks.rb:302:in `create_or_update'
     # /Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.4/lib/active_record/persistence.rb:103:in `save'
     # /Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.4/lib/active_record/validations.rb:51:in `save'
     # /Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.4/lib/active_record/attribute_methods/dirty.rb:21:in `save'
     # /Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.4/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
     # /Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.4/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
     # /Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.4/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
     # /Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.4/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
     # /Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.4/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
     # /Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.4/lib/active_record/transactions.rb:208:in `transaction'
     # /Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.4/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
     # /Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.4/lib/active_record/transactions.rb:268:in `block in save'
     # /Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.4/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
     # /Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.4/lib/active_record/transactions.rb:267:in `save'
     # /Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.4/lib/active_record/persistence.rb:34:in `create'
     # ./spec/models/post_spec.rb:7:in `block (3 levels) in <top (required)>'

  2) Post vote methods #down_votes counts the number of votes with value = -1
     Failure/Error: @post = Post.create(title: 'Post title', body: 'Post bodies must be pretty long.')
     NoMethodError:
       undefined method `votes' for nil:NilClass
     # ./app/models/post.rb:38:in `create_vote'
     # /Library/Ruby/Gems/2.0.0/gems/activesupport-4.1.4/lib/active_support/callbacks.rb:424:in `block in make_lambda'
     # /Library/Ruby/Gems/2.0.0/gems/activesupport-4.1.4/lib/active_support/callbacks.rb:221:in `call'
     # /Library/Ruby/Gems/2.0.0/gems/activesupport-4.1.4/lib/active_support/callbacks.rb:221:in `block in halting_and_conditional'
     # /Library/Ruby/Gems/2.0.0/gems/activesupport-4.1.4/lib/active_support/callbacks.rb:86:in `call'
     # /Library/Ruby/Gems/2.0.0/gems/activesupport-4.1.4/lib/active_support/callbacks.rb:86:in `run_callbacks'
     # /Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.4/lib/active_record/callbacks.rb:306:in `_create_record'
     # /Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.4/lib/active_record/timestamp.rb:57:in `_create_record'
     # /Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.4/lib/active_record/persistence.rb:482:in `create_or_update'
     # /Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.4/lib/active_record/callbacks.rb:302:in `block in create_or_update'
     # /Library/Ruby/Gems/2.0.0/gems/activesupport-4.1.4/lib/active_support/callbacks.rb:113:in `call'
     # /Library/Ruby/Gems/2.0.0/gems/activesupport-4.1.4/lib/active_support/callbacks.rb:113:in `call'
     # /Library/Ruby/Gems/2.0.0/gems/activesupport-4.1.4/lib/active_support/callbacks.rb:166:in `block in halting'
     # /Library/Ruby/Gems/2.0.0/gems/activesupport-4.1.4/lib/active_support/callbacks.rb:166:in `call'
     # /Library/Ruby/Gems/2.0.0/gems/activesupport-4.1.4/lib/active_support/callbacks.rb:166:in `block in halting'
     # /Library/Ruby/Gems/2.0.0/gems/activesupport-4.1.4/lib/active_support/callbacks.rb:166:in `call'
     # /Library/Ruby/Gems/2.0.0/gems/activesupport-4.1.4/lib/active_support/callbacks.rb:166:in `block in halting'
     # /Library/Ruby/Gems/2.0.0/gems/activesupport-4.1.4/lib/active_support/callbacks.rb:166:in `call'
     # /Library/Ruby/Gems/2.0.0/gems/activesupport-4.1.4/lib/active_support/callbacks.rb:166:in `block in halting'
     # /Library/Ruby/Gems/2.0.0/gems/activesupport-4.1.4/lib/active_support/callbacks.rb:215:in `call'
     # /Library/Ruby/Gems/2.0.0/gems/activesupport-4.1.4/lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
     # /Library/Ruby/Gems/2.0.0/gems/activesupport-4.1.4/lib/active_support/callbacks.rb:215:in `call'
     # /Library/Ruby/Gems/2.0.0/gems/activesupport-4.1.4/lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
     # /Library/Ruby/Gems/2.0.0/gems/activesupport-4.1.4/lib/active_support/callbacks.rb:86:in `call'
     # /Library/Ruby/Gems/2.0.0/gems/activesupport-4.1.4/lib/active_support/callbacks.rb:86:in `run_callbacks'
     # /Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.4/lib/active_record/callbacks.rb:302:in `create_or_update'
     # /Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.4/lib/active_record/persistence.rb:103:in `save'
     # /Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.4/lib/active_record/validations.rb:51:in `save'
     # /Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.4/lib/active_record/attribute_methods/dirty.rb:21:in `save'
     # /Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.4/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
     # /Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.4/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
     # /Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.4/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
     # /Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.4/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
     # /Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.4/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
     # /Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.4/lib/active_record/transactions.rb:208:in `transaction'
     # /Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.4/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
     # /Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.4/lib/active_record/transactions.rb:268:in `block in save'
     # /Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.4/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
     # /Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.4/lib/active_record/transactions.rb:267:in `save'
     # /Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.4/lib/active_record/persistence.rb:34:in `create'
     # ./spec/models/post_spec.rb:7:in `block (3 levels) in <top (required)>'

  3) Post vote methods #points returns the sum of all down and up votes
     Failure/Error: @post = Post.create(title: 'Post title', body: 'Post bodies must be pretty long.')
     NoMethodError:
       undefined method `votes' for nil:NilClass
     # ./app/models/post.rb:38:in `create_vote'
     # /Library/Ruby/Gems/2.0.0/gems/activesupport-4.1.4/lib/active_support/callbacks.rb:424:in `block in make_lambda'
     # /Library/Ruby/Gems/2.0.0/gems/activesupport-4.1.4/lib/active_support/callbacks.rb:221:in `call'
     # /Library/Ruby/Gems/2.0.0/gems/activesupport-4.1.4/lib/active_support/callbacks.rb:221:in `block in halting_and_conditional'
     # /Library/Ruby/Gems/2.0.0/gems/activesupport-4.1.4/lib/active_support/callbacks.rb:86:in `call'
     # /Library/Ruby/Gems/2.0.0/gems/activesupport-4.1.4/lib/active_support/callbacks.rb:86:in `run_callbacks'
     # /Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.4/lib/active_record/callbacks.rb:306:in `_create_record'
     # /Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.4/lib/active_record/timestamp.rb:57:in `_create_record'
     # /Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.4/lib/active_record/persistence.rb:482:in `create_or_update'
     # /Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.4/lib/active_record/callbacks.rb:302:in `block in create_or_update'
     # /Library/Ruby/Gems/2.0.0/gems/activesupport-4.1.4/lib/active_support/callbacks.rb:113:in `call'
     # /Library/Ruby/Gems/2.0.0/gems/activesupport-4.1.4/lib/active_support/callbacks.rb:113:in `call'
     # /Library/Ruby/Gems/2.0.0/gems/activesupport-4.1.4/lib/active_support/callbacks.rb:166:in `block in halting'
     # /Library/Ruby/Gems/2.0.0/gems/activesupport-4.1.4/lib/active_support/callbacks.rb:166:in `call'
     # /Library/Ruby/Gems/2.0.0/gems/activesupport-4.1.4/lib/active_support/callbacks.rb:166:in `block in halting'
     # /Library/Ruby/Gems/2.0.0/gems/activesupport-4.1.4/lib/active_support/callbacks.rb:166:in `call'
     # /Library/Ruby/Gems/2.0.0/gems/activesupport-4.1.4/lib/active_support/callbacks.rb:166:in `block in halting'
     # /Library/Ruby/Gems/2.0.0/gems/activesupport-4.1.4/lib/active_support/callbacks.rb:166:in `call'
     # /Library/Ruby/Gems/2.0.0/gems/activesupport-4.1.4/lib/active_support/callbacks.rb:166:in `block in halting'
     # /Library/Ruby/Gems/2.0.0/gems/activesupport-4.1.4/lib/active_support/callbacks.rb:215:in `call'
     # /Library/Ruby/Gems/2.0.0/gems/activesupport-4.1.4/lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
     # /Library/Ruby/Gems/2.0.0/gems/activesupport-4.1.4/lib/active_support/callbacks.rb:215:in `call'
     # /Library/Ruby/Gems/2.0.0/gems/activesupport-4.1.4/lib/active_support/callbacks.rb:215:in `block in halting_and_conditional'
     # /Library/Ruby/Gems/2.0.0/gems/activesupport-4.1.4/lib/active_support/callbacks.rb:86:in `call'
     # /Library/Ruby/Gems/2.0.0/gems/activesupport-4.1.4/lib/active_support/callbacks.rb:86:in `run_callbacks'
     # /Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.4/lib/active_record/callbacks.rb:302:in `create_or_update'
     # /Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.4/lib/active_record/persistence.rb:103:in `save'
     # /Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.4/lib/active_record/validations.rb:51:in `save'
     # /Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.4/lib/active_record/attribute_methods/dirty.rb:21:in `save'
     # /Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.4/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
     # /Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.4/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
     # /Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.4/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
     # /Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.4/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
     # /Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.4/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
     # /Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.4/lib/active_record/transactions.rb:208:in `transaction'
     # /Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.4/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
     # /Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.4/lib/active_record/transactions.rb:268:in `block in save'
     # /Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.4/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
     # /Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.4/lib/active_record/transactions.rb:267:in `save'
     # /Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.4/lib/active_record/persistence.rb:34:in `create'
     # ./spec/models/post_spec.rb:7:in `block (3 levels) in <top (required)>'

Finished in 0.38049 seconds (files took 2.78 seconds to load)
4 examples, 3 failures

Failed examples:

rspec ./spec/models/post_spec.rb:13 # Post vote methods #up_votes counts the number of votes with value = 1
rspec ./spec/models/post_spec.rb:19 # Post vote methods #down_votes counts the number of votes with value = -1
rspec ./spec/models/post_spec.rb:25 # Post vote methods #points returns the sum of all down and up votes
